---
title: Dark mode, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–±–æ—Ç–∞–µ—Ç
slug: dark-mode-which-works
publishDate: 2020-10-21T17:36:41.252Z
thumbnail: /assets/dark-mode-which-works.jpg
unsplashLink: https://unsplash.com/@vlisidis
unsplashAuthor: Terry Vlisidis
description: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è dark mode –ø–æ–¥ —Å—Ç–µ–∫ Gatsby + React + Typescript +
  Emotion. –° –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–π –û–° –∏ –±–µ–∑ —Ä–∞–∑–¥—Ä–∞–∂–∞—é—â–∏—Ö –º–æ—Ä–≥–∞–Ω–∏–π
tags:
  - dark mode
  - color scheme
  - Gatsby
---
–ù–∞–ø–æ—Ä–æ–≤—à–∏—Å—å –Ω–∞ –≥—Ä–∞–±–ª–∏ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Ç—ë–º–Ω–æ–π —Ç–µ–º—ã –≤ —Å–≤–æ—ë–º –±–ª–æ–≥–µ, –ø—Ä–∏—à–ª–æ—Å—å –∏–∑—É—á–∏—Ç—å —ç—Ç–æ—Ç –≤–æ–ø—Ä–æ—Å –±–æ–ª–µ–µ –¥–µ—Ç–∞–ª—å–Ω–æ. –í –∏—Ç–æ–≥–µ –ø—Ä–∏—à—ë–ª –∫ —Å–æ–≤—Å–µ–º –∏–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏, –Ω–µ–∂–µ–ª–∏ –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ -- –æ –Ω–µ–π —Ö–æ—Ç–µ–ª–æ—Å—å –±—ã —Å–µ–≥–æ–¥–Ω—è –∏ –ø–æ–≥–æ–≤–æ—Ä–∏—Ç—å. –ü–æ–¥–∞–≤–ª—è—é—â–µ–µ —á–∏—Å–ª–æ —É–º–Ω—ã—Ö –º—ã—Å–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –∑–¥–µ—Å—å –ø—Ä–∏–≤–æ–¥—è—Ç—Å—è, –≤–∑—è—Ç—ã –∏–∑ —Å—Ç–∞—Ç—å–∏ ["The Quest for the Perfect Dark Mode"](https://joshwcomeau.com/gatsby/dark-mode/) –∞–≤—Ç–æ—Ä—Å—Ç–≤–∞ Josh Comeau. –Ø –ª–∏—à—å –ø—Ä–æ–ø—É—Å—Ç–∏–ª –µ–≥–æ —É–º–æ–∑–∞–∫–ª—é—á–µ–Ω–∏—è —á–µ—Ä–µ–∑ –ª–∏–Ω–∑—É —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –≤–æ—Å–ø—Ä–∏—è—Ç–∏—è, –ø—Ä–∏–ø—Ä–∞–≤–∏–≤ –∏–¥–µ—è–º–∏, –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ —Å —Ä–∞–∑–Ω—ã—Ö –∫–æ–Ω—Ü–æ–≤ —Å–µ—Ç–∏ –ò–Ω—Ç–µ—Ä–Ω–µ—Ç –Ω–∞ —Ç–µ–º—É dark –º–æ–¥–æ–≤, –∏ —Å–ª–µ–ø–∏–≤ –≤ –∏—Ç–æ–≥–µ —Ä–µ—à–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –º–µ–Ω—è, –∞ –∏–º–µ–Ω–Ω–æ –ø–æ–¥ —Å—Ç–µ–∫ Gatsby + React + Typescript + Emotion.

–ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω –Ω–∞ [Github](https://github.com/p1t1ch/dark-theme-demo) -- –∂–µ–ª–∞—é—â–∏—Ö –ø–æ–∫–æ–ø–∞—Ç—å—Å—è –≤ –∏—Å—Ö–æ–¥–Ω–∏–∫–∞—Ö –∏–ª–∏ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å–µ–±–µ –º–∏–ª–æ—Å—Ç–∏ –ø—Ä–æ—à—É.

## –û–ø—Ä–µ–¥–µ–ª—è–µ–º –æ—Ä–∏–µ–Ω—Ç–∏—Ä—ã

–ö–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–±–æ—Ç–∞—é—â–∏–π dark mode? –î–ª—è –º–µ–Ω—è –æ–Ω –¥–æ–ª–∂–µ–Ω —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–º –ø—Ä–∏–Ω—Ü–∏–ø–∞–º:

1. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å–∞–π—Ç –¥–æ–ª–∂–µ–Ω –Ω–∞—Å–ª–µ–¥–æ–≤–∞—Ç—å —Ç–µ–º—É, –≤—ã–±—Ä–∞–Ω–Ω—É—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –Ω–∞ —É—Ä–æ–≤–Ω–µ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã
1. –ù–∞ —Å–∞–π—Ç–µ –≤—ã–≤–æ–¥–∏—Ç—Å—è –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ç–µ–º—É –Ω–∞ —É—Ä–æ–≤–Ω–µ —Å–∞–π—Ç–∞. –≠—Ç–æ —Ä–µ—à–µ–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –º–µ–∂–¥—É —Å–µ—Å—Å–∏—è–º–∏
1. –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫ (–Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –º–µ–¥–∏–∞–≤—ã—Ä–∞–∂–µ–Ω–∏—è –∏–ª–∏ –æ—Ç–∫–ª—é—á–µ–Ω JS), —Ç–æ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å —Å–∞–π—Ç –≤ —Å–≤–µ—Ç–ª–æ–π —Ç–µ–º–µ

## –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º —Å–∏—Å—Ç–µ–º—É —Ü–≤–µ—Ç–æ–≤

–ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —á—Ç–æ —É –Ω–∞—Å —É–∂–µ –µ—Å—Ç—å —Ä–∞–±–æ—Ç–∞—é—â–∏–π —Å–∞–π—Ç. –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã —Ü–≤–µ—Ç–æ–≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ñ–∞–π–ª–µ –∏ –≤–º–µ—Å—Ç–µ —Å –¥—Ä—É–≥–∏–º–∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞–º–∏ –æ–±—Ä–∞–∑—É—é—Ç –æ–±—ä–µ–∫—Ç —Ç–µ–º—ã:

```tsx
const colors = {
  black: '#2b2b2b',
  white: '#fff',
  darkPurple: '#6d4672',
  lightPurple: '#ea9ff4',
}

const theme = {
  colors,
  // ... –ü—Ä–æ—á–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ç–µ–º—ã
}

// –î–ª—è —Ç–∏–ø–∏–∑–∞—Ü–∏–∏ —Ö—É–∫–∞ useTheme
export type Theme = typeof theme

// –î–ª—è —Ç–∏–ø–∏–∑–∞—Ü–∏–∏ styled –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
export interface ThemeProps {
  theme: Theme
}

export default theme
```

–í—Å—ë –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ–±—ë—Ä–Ω—É—Ç–æ –≤ ThemeProvider, –≤ –∫–æ—Ç–æ—Ä—ã–π –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è —Ç–µ–º–∞. –í –º–æ—ë–º —Å–ª—É—á–∞–µ —ç—Ç–∞ –æ–±—ë—Ä—Ç–∫–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∞ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç RootWrapper, –≤ –∫–æ—Ç–æ—Ä—ã–π —Ç–∞–∫–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ —á–µ—Ä–µ–∑ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç Global –∏–∑ emotion –∏ –≤–ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏–∏ –º–æ–≥—É—Ç –±—ã—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥—Ä—É–≥–∏–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã:

```tsx
import React from 'react'
import { ThemeProvider } from 'emotion-theming'
import GlobalStyles from '@/components/GlobalStyles'
import theme from '@theme'

interface RootWrapperProps {
  /** Site content */
  children: React.ReactNode
}

const RootWrapper = ({ children }: RootWrapperProps) => {
  return (
    <ThemeProvider theme={theme}>
      <GlobalStyles />
      {children}
    </ThemeProvider>
  )
}

export default RootWrapper
```

–≠—Ç–æ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –æ–±–æ—Ä–∞—á–∏–≤–∞–µ—Ç Gatsby –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, Storybook –∏ Jest –æ–∫—Ä—É–∂–µ–Ω–∏—è -- –∫–æ—Ä–æ—á–µ, –æ–Ω –≤–µ–∑–¥–µ —Å–∞–º—ã–π –≤–µ—Ä—Ö–Ω–∏–π –∏ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π. –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ —Ç–µ–º–∞ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –¥–æ—Å—Ç—É–ø–Ω–∞ –ª–∏–±–æ —á–µ—Ä–µ–∑ —Ö—É–∫ useTheme –∏–∑ emotion-theming, –ª–∏–±–æ —á–µ—Ä–µ–∑ –ø—Ä–æ–ø theme –≤ @emotion/styled. –í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è —Ü–≤–µ—Ç–æ–≤ —á–∏—Ç–∞—é—Ç—Å—è –∏–∑ –æ–±—ä–µ–∫—Ç–∞ —Ç–µ–º—ã –Ω–∞ –ª—é–±–æ–º —É—Ä–æ–≤–Ω–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –Ω–∞–ø—Ä–∏–º–µ—Ä –≤ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö —Å—Ç–∏–ª—è—Ö:

```tsx
import React from 'react'
import { Global } from '@emotion/core'
import { useTheme } from 'emotion-theming'
import { Theme } from '@theme'

const GlobalStyles = () => {
  const theme = useTheme<Theme>()

  return (
    <Global
      styles={[
        {
          body: {
            backgroundColor: theme.colors.white,
            color: theme.colors.black,
          },
	  // ... –ü—Ä–æ—á–∏–µ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏
        },
      ]}
    />
  )
}

export default GlobalStyles
```

–í –æ–±—â–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Å–µ—Ç–∞–ø, —Å –∫–æ—Ç–æ—Ä—ã–º –≤—ã –Ω–∞–≤–µ—Ä–Ω—è–∫–∞ –∑–Ω–∞–∫–æ–º—ã.

–î–æ–±–∞–≤–ª—è—è dark mode, —Ü–≤–µ—Ç–∞ –ø–µ—Ä–µ—Å—Ç–∞—é—Ç –±—ã—Ç—å —Å—Ç–∞—Ç–∏—á–Ω—ã–º–∏ -- –º—ã –¥–æ–ª–∂–Ω—ã –∫–∞–∫–∏–º-—Ç–æ –æ–±—Ä–∞–∑–æ–º –∏–∑–º–µ–Ω—è—Ç—å –∏—Ö –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ —Ç–µ–º—ã. –≠—Ç–æ–≥–æ –º–æ–∂–Ω–æ –¥–æ–±–∏—Ç—å—Å—è —Ä–∞–∑–Ω—ã–º–∏ —Å–ø–æ—Å–æ–±–∞–º–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–æ–∑–¥–∞—Ç—å —Å–≤–æ–π –æ–±—ä–µ–∫—Ç –ø–æ–¥ –∫–∞–∂–¥—É—é —Ç–µ–º—É –∏ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –≤ ThemeProvider, –¥–æ–±–∞–≤–∏–≤ –ø—Ä–æ–≤–µ—Ä–∫—É –Ω–∞ —É—Ä–æ–≤–Ω–µ RootWrapper. –¢–æ–≥–¥–∞ –ø—Ä–∏ —É—Å–ª–æ–≤–∏–∏, —á—Ç–æ –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏—è –ø–æ–ª–µ–π —É —ç—Ç–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤ —Å–æ–≤–ø–∞–¥–∞—é—Ç, –º—ã —Å–º–æ–∂–µ–º –æ—Å—Ç–∞–≤–∏—Ç—å –≤—Å–µ —Å—Ç–∏–ª–∏ –ø—Ä–æ–µ–∫—Ç–∞ –Ω–µ–∏–∑–º–µ–Ω–Ω—ã–º–∏, –ø–æ–¥–º–µ–Ω—è—è —Ç–æ–ª—å–∫–æ —Ç–µ–º—É. –ù—É–∂–Ω–æ –±—É–¥–µ—Ç —Ç–æ–ª—å–∫–æ –ø–æ–º–µ–Ω—è—Ç—å –Ω–µ–π–º–∏–Ω–≥–∏ –Ω–∞ —á—Ç–æ-—Ç–æ –±–æ–ª–µ–µ –Ω–µ–π—Ç—Ä–∞–ª—å–Ω–æ–µ –≤—Ä–æ–¥–µ theme.colors.active, —Ç.–∫. —Ü–≤–µ—Ç–∞ —Ç–∞–º –º–æ–≥—É—Ç –±—ã—Ç—å —Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ –ª—é–±—ã–µ.

–ú—ã –∂–µ –æ–¥–Ω–∞–∫–æ –ø–æ–π–¥—ë–º –ø–æ –¥—Ä—É–≥–æ–º—É –ø—É—Ç–∏ –∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ. –í—ã –º–æ–∂–µ—Ç–µ –∑–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å: "–í–∞—Å–∏–ª–∏—á, —É –Ω–∞—Å –∂–µ —Ç—É—Ç CSS in JS, –∑–∞—á–µ–º –Ω–∞–º –≤–æ–æ–±—â–µ —ç—Ç–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, –º—ã –∂–µ –≤ JS –æ–∫—Ä—É–∂–µ–Ω–∏–∏ -- –±–µ—Ä—ë—à—å –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å JS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, –Ω–µ?". –°–ø–∞—Å–∏–±–æ, —á—Ç–æ —Å–ø—Ä–æ—Å–∏–ª–∏. –ù–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –¥–∞–∂–µ —Å –±–∏–±–ª–∏–æ—Ç–µ–∫–∞–º–∏ –Ω–∞–ø–æ–¥–æ–±–∏–µ Emotion CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å –ø–æ–ª–µ–∑–Ω—ã. –ò—Å–ø–æ–ª—å–∑—É—è –≤—ã—à–µ–æ–±–æ–∑–Ω–∞—á–µ–Ω–Ω—ã–π –º–µ—Ç–æ–¥ —Å 2 –æ–±—ä–µ–∫—Ç–∞–º–∏, Emotion –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞, –∏—Å–ø–æ–ª—å–∑—É—é—â–µ–≥–æ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Ü–≤–µ—Ç–∞, –¥–æ–±–∞–≤–∏—Ç –≤ head 2 —Ç–µ–≥–∞ style —Å —Ä–∞–∑–Ω—ã–º–∏ –∫–ª–∞—Å—Å–∞–º–∏, –≤ –∫–æ—Ç–æ—Ä—ã—Ö –±—É–¥—É—Ç –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω—ã –∑–Ω–∞—á–µ–Ω–∏—è —Ü–≤–µ—Ç–æ–≤—ã—Ö –∫–æ–Ω—Å—Ç–∞–Ω—Ç. –ò—Å–ø–æ–ª—å–∑—É—è CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, Emotion –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—Å—è –≤—Å–µ–≥–æ –æ–¥–Ω–∏–º —Ç–µ–≥–æ–º, –≤ –∫–æ—Ç–æ—Ä–æ–º –±—É–¥—É—Ç –∑–∞–ø–∏—Å–∞–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–æ —Ç–∏–ø—É `var(‚Äîcolor-active)`. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —Ü–≤–µ—Ç–∞ —Å—Ç–∞–ª–∏ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º–∏ -- –º—ã –º–µ–Ω—è–µ–º –∏—Ö, –º–µ–Ω—è—è –∑–Ω–∞—á–µ–Ω–∏—è —ç—Ç–∏—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤ :root, —á—Ç–æ –±—É–¥–µ—Ç –æ—á–µ–Ω—å –≤–∞–∂–Ω–æ (—á–∏—Ç–∞–π—Ç–µ –¥–∞–ª—å—à–µ). –¢–∞–∫–∂–µ —ç—Ç–æ —É–º–µ–Ω—å—à–∞–µ—Ç —á–∏—Å–ª–æ —Å—Ç–∏–ª–µ–π, —á—Ç–æ –≤—Å–µ–≥–¥–∞ —Ö–æ—Ä–æ—à–æ. –ù—É –∏ –≤ —Ü–µ–ª–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç —Ç–µ–º—ã –Ω–µ —Ç—Ä–µ–±—É—é—Ç –∏–º–ø–æ—Ä—Ç–æ–≤, —á—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å —É–¥–æ–±–Ω–µ–µ, –Ω–æ –∑–¥–µ—Å—å —ç—Ç–æ –Ω–µ –ø—Ä–∏—á–∏–Ω–∞ -- —è –∏—Å–ø–æ–ª—å–∑—É—é –∏—Ö —Ç–æ–ª—å–∫–æ –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤.

–ò—Ç–∞–∫, –º—ã –æ–ø—Ä–µ–¥–µ–ª–∏–ª–∏—Å—å, —á—Ç–æ –¥–ª—è —Ü–≤–µ—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –∑–∞–≤–∏—Å—è—Ç –æ—Ç —Ç–µ–º—ã, –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ. –î–ª—è —Å—Ç–∞—Ç–∏—á–Ω—ã—Ö —Å—Ç–∏–ª–µ–π –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ç–µ–º—É –Ω–∞–ø—Ä—è–º—É—é, –∫–∞–∫ –∏ —Ä–∞–Ω—å—à–µ. –î–∞–≤–∞–π—Ç–µ –≤–Ω–µ—Å—ë–º —ç—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ. –ü–µ—Ä–≤—ã–º –¥–µ–ª–æ–º, –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –º–∞–ø–ø–∏–Ω–≥ –º–µ–∂–¥—É —Ç–µ–º–∞–º–∏ –∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞–º–∏. –û–ø—Ä–µ–¥–µ–ª—é –µ–≥–æ –≤ —Ç–æ–º –∂–µ —Ñ–∞–π–ª–µ —Å —Ç–µ–º–æ–π –Ω–∞—Ä—è–¥—É —Å –ø–∞—Ä–æ–π –ø–æ–ª–µ–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤:

```tsx
export const themeColors = {
  primary: {
    light: colors.black,
    dark: colors.white,
  },
  secondary: {
    light: colors.white,
    dark: colors.black,
  },
  active: {
    light: colors.darkPurple,
    dark: colors.lightPurple,
  },
}

export type ColorSchemeTypes = 'light' | 'dark'
export type ColorSchemeVars = keyof typeof themeColors
```

–ò —á—Ç–æ–±—ã –±—ã–ª–æ —É–¥–æ–±–Ω–µ–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏, –¥–æ–±–∞–≤–∏–º —Ö–µ–ª–ø–µ—Ä:

```tsx
import { ColorSchemeVars } from '@theme'

const colorVar = (varName: ColorSchemeVars) => `var(--color-${varName})`

export default colorVar
```

–¢–µ–ø–µ—Ä—å –º—ã –º–æ–∂–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∑–∞–ø–∏—Å—å `colorVar('active')`, –ø–æ–ª—É—á–∞—è –±–æ–Ω—É—Å—ã —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–π —Ç–∏–ø–∏–∑–∞—Ü–∏–∏ –≤ –≤–∏–¥–µ —Å–ø–∏—Å–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ç–µ–º—ã. –ò–Ω–∞—á–µ –º—ã –±—ã —Ä–∞–±–æ—Ç–∞–ª–∏ —Å–æ —Å—Ç—Ä–æ–∫–∞–º–∏, –∏ —Ç–∞–º —Ç–∏–ø–∏–∑–∞—Ü–∏–∏, –ø–æ–Ω—è—Ç–Ω–æ–µ –¥–µ–ª–æ, –Ω–µ –±—ã–ª–æ –±—ã.

–ù–∞–∫–æ–Ω–µ—Ü, –æ–ø—Ä–µ–¥–µ–ª–∏–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ :root –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –∏–∑ —Å–≤–µ—Ç–ª–æ–π —Ç–µ–º—ã, –∏ –∏–∑–º–µ–Ω–∏–º –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Ü–≤–µ—Ç–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–∞ —Ç–µ–º—ã –Ω–∞ –≤—ã–∑–æ–≤—ã colorVar:

```tsx{5,14-18,20-21}
import React from 'react'
import { Global } from '@emotion/core'
import { useTheme } from 'emotion-theming'
import { Theme } from '@theme'
import colorVar from '@/utils/colorVar'

const GlobalStyles = () => {
  const theme = useTheme<Theme>()

  return (
    <Global
      styles={[
        {
	  ':root': {
            '--color-primary': theme.colors.black,
            '--color-secondary': theme.colors.white,
            '--color-active': theme.colors.darkPurple,
          },
          body: {
            backgroundColor: colorVar('secondary'),
            color: colorVar('primary'),
          },
	  // ... –ü—Ä–æ—á–∏–µ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏
        },
      ]}
    />
  )
}

export default GlobalStyles
```

–†–∞–∑—É–º–µ–µ—Ç—Å—è, —Ç–∞–∫—É—é –∑–∞–º–µ–Ω—É –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Å—Ç–∏ –Ω–∞ —É—Ä–æ–≤–Ω–µ –≤—Å–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ –≤–µ–∑–¥–µ, –≥–¥–µ –Ω—É–∂–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Ü–≤–µ—Ç–∞. –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –≤—Å—ë –¥–æ–ª–∂–Ω–æ –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–º —Å–æ—Å—Ç–æ—è–Ω–∏—é –¥–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞, –Ω–æ –º—ã –ø–µ—Ä–µ—à–ª–∏ –Ω–∞ CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ –≥–æ—Ç–æ–≤—ã –¥–æ–±–∞–≤–ª—è—Ç—å –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–µ–º.

## –î–æ—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –ª–æ–≥–∏–∫—É –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

–û—Å–Ω–æ–≤–Ω–∞—è –∏–¥–µ—è –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ç–æ–º, —á—Ç–æ–±—ã –æ–±–µ—Ä–Ω—É—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ –ø—Ä–æ–≤–∞–π–¥–µ—Ä —Ç–µ–º—ã, —á—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç –ø–æ–ª—É—á–∞—Ç—å —Ç–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Ç–µ–º—ã –∏ –º–µ—Ç–æ–¥ –¥–ª—è –µ—ë –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –Ω–∞ –ª—é–±–æ–º —É—Ä–æ–≤–Ω–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –ü—Ä–∏ —ç—Ç–æ–º –º–µ—Ç–æ–¥ –±—É–¥–µ—Ç –Ω–µ —Ç–æ–ª—å–∫–æ –º–µ–Ω—è—Ç—å —Å—Ç–µ–π—Ç, –Ω–æ –∏ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –≤ Local Storage –∏ –º–µ–Ω—è—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö. –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—è –±—É–¥–µ—Ç —Ç—Ä–∏–≤–∏–∞–ª—å–Ω—ã–º.

### –°–æ–∑–¥–∞—ë–º –∫–æ–Ω—Ç–µ–∫—Å—Ç

–û—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –Ω–∞–º –Ω—É–∂–Ω—ã 2 –≤–µ—â–∏: –ø—Ä–æ–≤–∞–π–¥–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–∫–∏–Ω–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –∏ —Ö—É–∫, —á–µ—Ä–µ–∑ –∫–æ—Ç–æ—Ä—ã–π –º—ã —ç—Ç–æ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç —Å–º–æ–∂–µ–º —á–∏—Ç–∞—Ç—å.

–ù–∞—á–Ω—ë–º —Å —Ö—É–∫–∞. –°–æ–∑–¥–∞–¥–∏–º –∫–æ–Ω—Ç–µ–∫—Å—Ç —á–µ—Ä–µ–∑ createContext –∏ –∫–∞—Å—Ç–æ–º–Ω—ã–π —Ö—É–∫, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–π –≤–Ω—É—Ç—Ä–∏ useContext:

```tsx
import { createContext, useContext } from 'react'
import { ColorSchemeTypes } from '@theme'

export const ColorSchemeContext = createContext<
  [ColorSchemeTypes | undefined, (value: ColorSchemeTypes) => void] | undefined
>(undefined)

const useColorScheme = () => {
  const context = useContext(ColorSchemeContext)

  if (!context) throw new Error('This component must be used within a <ColorSchemeProvider> component')

  return context
}

export default useColorScheme
```

–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ —Ö—É–∫–∞ –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ ‚Äî- —ç—Ç–æ –∫–ª–∞—Å—Å–Ω–∞—è —Ñ–∏—à–∫–∞, –∫–æ—Ç–æ—Ä—É—é —è —É–∂–µ –¥–æ–≤–æ–ª—å–Ω–æ –¥–∞–≤–Ω–æ –ø–µ—Ä–µ–Ω—è–ª –æ—Ç —Å–∏–ª—å–Ω—ã—Ö –º–∏—Ä–∞ –†–µ–∞–∫—Ç–∞. –¢–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–ø—Ä—è—Ç–∞—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç –≤–Ω—É—Ç—Ä–∏, —É–±–∏—Ä–∞—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –µ–≥–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å. –ò –∑–¥–µ—Å—å –∂–µ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ –ø–æ–ø—ã—Ç–∫–∏ –ø–æ–ª—É—á–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –≤–Ω–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞.

–ö–∞—Å–∞—Ç–µ–ª—å–Ω–æ —Ç–∏–ø–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞, –∑–¥–µ—Å—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –º–∞—Å—Å–∏–≤ `[colorScheme, setColorScheme]`, —á—Ç–æ–±—ã —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –º–µ–Ω—Ç–∞–ª—å–Ω—É—é –º–æ–¥–µ–ª—å useState. –¢–∏–ø —Å—Ö–µ–º—ã (—è –Ω–∞–∑–≤–∞–ª –≤—Å—ë —Å—Ö–µ–º–æ–π –ø–æ –∞–Ω–∞–ª–æ–≥–∏–∏ —Å prefers-color-scheme) -- —ç—Ç–æ –≤ –∫–æ–Ω–µ—á–Ω–æ–º –∏—Ç–æ–≥–µ `'light' | 'dark' | undefined`. –ó–∞—á–µ–º –Ω–∞–º –Ω—É–∂–µ–Ω undefined —É–≤–∏–¥–∏—Ç–µ —á—É—Ç—å –ø–æ–∑–∂–µ.

–ù—É –∏ —Ç–µ–ø–µ—Ä—å —Å–∞–º –ø—Ä–æ–≤–∞–π–¥–µ—Ä:

```tsx
import React, { useEffect, useState } from 'react'
import { ColorSchemeContext } from './useColorScheme'
import { ColorSchemeTypes, themeColors } from '@theme'
import { COLOR_SCHEME_LC_KEY } from '@/utils/constants'

interface ColorSchemeProviderProps {
  /** Content with access to color scheme */
  children: React.ReactNode
}

const ColorSchemeProvider = ({ children }: ColorSchemeProviderProps) => {
  const [colorScheme, setColorScheme] = useState<ColorSchemeTypes | undefined>(undefined)

  const saveColorScheme = (newColorScheme: ColorSchemeTypes) => {
    window.localStorage.setItem(COLOR_SCHEME_LC_KEY, newColorScheme)

    const root = document.documentElement
    Object.entries(themeColors).forEach(([colorVar, valueByTheme]) => {
      root.style.setProperty(`--color-${colorVar}`, valueByTheme[newColorScheme])
    })

    setColorScheme(newColorScheme)
  }

  return <ColorSchemeContext.Provider value={[colorScheme, saveColorScheme]}>{children}</ColorSchemeContext.Provider>
}

export { default as useColorScheme } from './useColorScheme'

export default ColorSchemeProvider
```

–í —Ü–µ–Ω—Ç—Ä–µ –≤—Å–µ–≥–æ –ª–µ–∂–∏—Ç —Å—Ç–µ–π—Ç. –ú—ã –±—ã –ø–µ—Ä–µ–¥–∞–ª–∏ –µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏–µ –∏ —Å–µ—Ç—Ç–µ—Ä –Ω–∞–ø—Ä—è–º—É—é –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç, –µ—Å–ª–∏ –±—ã –Ω–∞–º –Ω–µ –Ω—É–∂–Ω–æ –±—ã–ª–æ –¥–µ–ª–∞—Ç—å –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ç–µ–º—ã –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π. –ù–æ –Ω–∞–º –Ω—É–∂–Ω–æ! –¢–∞–∫ —á—Ç–æ –º—ã –æ–ø—Ä–µ–¥–µ–ª—è–µ–º —Ñ—É–Ω–∫—Ü–∏—é saveColorScheme –∏ –ø–µ—Ä–µ–¥–∞—ë–º –µ—ë –≤ –ø—Ä–æ–≤–∞–π–¥–µ—Ä –≤–º–µ—Å—Ç–æ setColorScheme. –í–Ω—É—Ç—Ä–∏ —ç—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –º—ã:

1. –°–æ—Ö—Ä–∞–Ω—è–µ–º –Ω–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤ Local Storage. –ò–º—è —è –≤—ã–Ω–µ—Å –≤ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞
1. –ú–µ–Ω—è–µ–º –∑–Ω–∞—á–µ–Ω–∏—è CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö. –î–µ–ª–∞–µ–º —ç—Ç–æ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ, –∏—Å–ø–æ–ª—å–∑—É—è –º–µ—Ç–æ–¥ setProperty. –§–æ—Ä–º–∞—Ç –æ–±—ä–µ–∫—Ç–∞ themeColors –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç—å –ø–æ–¥–æ–±–Ω—É—é —Ä–æ—Ç–∞—Ü–∏—é —ç–ª–µ–≥–∞–Ω—Ç–Ω—ã–º –æ–±—Ä–∞–∑–æ–º
1. –ù–∞–∫–æ–Ω–µ—Ü, –º–µ–Ω—è–µ–º —Å—Ç–µ–π—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –æ–±–æ—Ä–∞—á–∏–≤–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ –ø—Ä–æ–≤–∞–π–¥–µ—Ä, –∏ —Ç–µ–ø–µ—Ä—å –≤—Å—ë –≥–æ—Ç–æ–≤–æ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—è:

```tsx{5,14,19}
import React from 'react'
import { ThemeProvider } from 'emotion-theming'
import GlobalStyles from '@/components/GlobalStyles'
import theme from '@theme'
import ColorSchemeProvider from '@/components/ColorSchemeProvider'

interface RootWrapperProps {
  /** Site content */
  children: React.ReactNode
}

const RootWrapper = ({ children }: RootWrapperProps) => {
  return (
    <ColorSchemeProvider>
      <ThemeProvider theme={theme}>
        <GlobalStyles />
	{children}
      </ThemeProvider>
    </ColorSchemeProvider>
  )
}

export default RootWrapper
```

### –î–æ–±–∞–≤–ª—è–µ–º –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å

–ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å -- –æ–±—ã—á–Ω—ã–π React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–∞—à —Å–∞–º–æ–ø–∏—Å–Ω—ã–π —Ö—É–∫ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏—è —Ç–µ–º—ã –∏ –º–µ—Ç–æ–¥–∞ –¥–ª—è –µ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è. –ù–∞ –ø—Ä–æ—Å—Ç–æ—Ä–∞—Ö –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ —Å–æ—Ç–Ω–∏ –º–æ–¥–Ω—ã—Ö —Ç–æ–≥–≥–ª–æ–≤ -- –¥–ª—è –¥–µ–º–∫–∏ —è –æ–≥—Ä–∞–Ω–∏—á—É—Å—å –∫–Ω–æ–ø–∫–æ–π —Å –∏–∫–æ–Ω–∫–∞–º–∏ –∏–∑ –º–æ–¥—É–ª—è react-icons, —É–±–µ–¥–∏–≤—à–∏—Å—å, —á—Ç–æ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –¥–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è —Å–∫—Ä–∏–Ω—Ä–∏–¥–µ—Ä–æ–≤, –∫–æ–Ω–µ—á–Ω–æ –∂–µ:

```tsx
import React from 'react'
import { useColorScheme } from '@/components/ColorSchemeProvider'
import { FiMoon, FiSun } from 'react-icons/fi'

const ColorSchemeToggle = () => {
  const [colorScheme, setColorScheme] = useColorScheme()

  return (
    <button
      onClick={() => setColorScheme(colorScheme === 'dark' ? 'light' : 'dark')}
      aria-label="Dark theme"
      aria-pressed={colorScheme === 'dark'}
    >
      {colorScheme === 'dark' ? <FiSun /> : <FiMoon />}
    </button>
  )
}

export default ColorSchemeToggle
```

–î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤–µ–Ω—å–∫–∏–π –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –≤ –ª—é–±–æ–µ –º–µ—Å—Ç–æ —Å–∞–π—Ç–∞, –Ω–µ–∏–∑–º–µ–Ω–Ω–æ–µ –º–µ–∂–¥—É —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä –≤ —à–∞–ø–∫—É. –ò —Ç–µ–ø–µ—Ä—å –º–æ–∂–µ–º –ø–æ–¥—ë—Ä–≥–∞—Ç—å –µ–≥–æ –∏ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Ç–µ–º–∞ –º–µ–Ω—è–µ—Ç—Å—è, –∞ –≤–º–µ—Å—Ç–µ —Å —ç—Ç–∏–º –∏–¥—ë—Ç –∑–∞–ø–∏—Å—å –≤ Local Storage.

–û–¥–Ω–∞–∫–æ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç –≥–ª–∞–≤–Ω–æ–≥–æ! –ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Ç–µ–º–∞ –≤—Å–µ–≥–¥–∞ —Å–ª–µ—Ç–∞–µ—Ç –Ω–∞ —Å–≤–µ—Ç–ª—É—é. –î–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ, –≤–µ–¥—å –º—ã –∂–µ –Ω–∏–∫–∞–∫ –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ Local Storage, –∏ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –Ω–∞ —É—Ä–æ–≤–Ω–µ –û–° —Ç–∞–∫–∂–µ –Ω–µ –∑–∞—Ç—Ä–∞–≥–∏–≤–∞–µ–º. –ü–æ—Ä–∞ —ç—Ç–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å. –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ –º–∞–≥–∏—á–µ—Å–∫–æ–π —á–∞—Å—Ç–∏.

## –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–µ–º—É –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Å–∞–π—Ç–∞

–¢–µ–ø–µ—Ä—å —Ç–æ–Ω–∫–∏–π –º–æ–º–µ–Ω—Ç. –ö–∞–∫ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ç–µ–º—É, –∫–æ–≥–¥–∞ —Å–∞–π—Ç —Ç–æ–ª—å–∫–æ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è? –ù—É–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é, —Å—á–∏—Ç—ã–≤–∞—é—â—É—é –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ Local Storage –∏ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–µ –û–° —á–µ—Ä–µ–∑ matchMedia. –ù–æ –±–æ–ª–µ–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π –≤–æ–ø—Ä–æ—Å: –∫–æ–≥–¥–∞ –º—ã –¥–æ–ª–∂–Ω—ã –µ—ë –≤—ã–∑—ã–≤–∞—Ç—å? –ï—Å–ª–∏ –ø—Ä–æ–±–æ–≤–∞—Ç—å —ç—Ç–æ —Å–¥–µ–ª–∞—Ç—å —Å–æ–≤—Å–µ–º –≤ –ª–æ–±, —Ç–æ –ø–µ—Ä–≤–æ–π –∏–¥–µ–µ–π –±—É–¥–µ—Ç –ø–µ—Ä–µ–¥–∞—Ç—å –µ—ë –≤ useState –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ ‚Äî —Ç–∞–∫ –º—ã –æ–ø—Ä–µ–¥–µ–ª–∏–º –Ω–∞—á–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è —Å—Ç–µ–π—Ç–∞. –ù–æ –µ—Å–ª–∏ –≤—ã –≤–æ–ø–ª–æ—Ç–∏—Ç–µ —ç—Ç—É –∏–¥–µ—é –≤ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å –Ω–∞ –Ω–∞—à–µ–º —Å—Ç–µ–∫–µ, —Ç–æ —É–≤–∏–¥–∏—Ç–µ, —á—Ç–æ –≤—Å—ë —Ä–∞–∑–≤–∞–ª–∏–ª–æ—Å—å! –ü–æ—á–µ–º—É —Ç–∞–∫? –ü–æ—Ç–æ–º—É —á—Ç–æ Gatsby –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–µ—Ä–≤–µ—Ä–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä, —Ç–æ—á–Ω–µ–µ –≥–æ–≤–æ—Ä—è –ø—Ä–µ—Ä–µ–Ω–¥–µ—Ä -- –æ–Ω –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å—Ç–∞—Ç–∏—á–Ω—ã–µ HTML —Ñ–∞–π–ª—ã, –≤—ã–ø–æ–ª–Ω—è—è —Ä–µ–Ω–¥–µ—Ä React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ Node –æ–∫—Ä—É–∂–µ–Ω–∏–∏. –ê —Ç–∞–º —á—Ç–æ? –ü—Ä–∞–≤–∏–ª—å–Ω–æ, –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω window. –ê –æ–Ω –Ω–∞–º –Ω—É–∂–µ–Ω –∏ –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ Local Storage –∏ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è matchMedia. –ü—Ä–æ–±–ª–µ–º–∫–∞!

–¢.–∫. –ø–µ—Ä–≤–∏—á–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä –Ω–µ –∑–∞—Ö–æ–¥–∏—Ç –≤–Ω—É—Ç—Ä—å —ç—Ñ—Ñ–µ–∫—Ç–æ–≤, —Ç–æ —Å–ª–µ–¥—É—é—â–∏–º –ª–æ–≥–∏—á–Ω—ã–º —à–∞–≥–æ–º –±—É–¥–µ—Ç –ø—Ä–æ—Å—Ç–∞–≤–∏—Ç—å undefined –≤ —Å—Ç–µ–π—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (–º—ã —ç—Ç–æ —É–∂–µ —Å–¥–µ–ª–∞–ª–∏) –∏ –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ç–µ–π—Ç–∞ –≤–Ω—É—Ç—Ä—å useEffect. –ò —Ç–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ —É–∂–µ –±—É–¥–µ—Ç –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å, –Ω–æ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Å–∞–π—Ç–∞ –≤—ã —É–≤–∏–¥–∏—Ç–µ "–º–æ—Ä–≥–∞–Ω–∏–µ": —ç—Ç–æ—Ç –±–ª–∏–Ω–∫ –≤—ã–∑–≤–∞–Ω –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Å–æ —Å–≤–µ—Ç–ª–æ–π —Ç–µ–º—ã –Ω–∞ —Ç—ë–º–Ω—É—é. –í–µ–¥—å –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ, –Ω–∞ –ø–µ—Ä–≤–∏—á–Ω–æ–º —Ä–µ–Ω–¥–µ—Ä–µ —Ç–µ–º—É –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ, –∞ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ –æ–Ω–∞ –≤—Å–µ–≥–¥–∞ –±—É–¥–µ—Ç —Å–≤–µ—Ç–ª–æ–π (–≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å —Ü–≤–µ—Ç–∞–º–∏ –≤ :root) –∏ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—Å—è –Ω–∞ –Ω—É–∂–Ω—É—é –ø–æ–∑–∂–µ.

–¢–∞–∫ –º–æ–∂–µ–º –ª–∏ –º—ã –æ—Ç–∫—Ä—ã–≤–∞—Ç—å —Å–∞–π—Ç —Å—Ä–∞–∑—É —Å –Ω—É–∂–Ω–æ–π —Ç–µ–º–æ–π? –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏, –Ω–µ—Ç, —Ç.–∫. –ø–µ—Ä–≤–∏—á–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, –∞ —Ç–∞–º –º—ã –Ω–µ —É–∑–Ω–∞–µ–º –æ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –ù–æ –º—ã —É–±—Ä–∞—Ç—å –±–ª–∏–Ω–∫, –æ—Ç–ª–æ–∂–∏–≤ —Ä–µ–Ω–¥–µ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –≠—Ç–æ –¥–µ–ª–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ –≤—Å—Ç–∞–≤–∫—É —Å–∫—Ä–∏–ø—Ç–∞, –æ–ø—Ä–µ–¥–µ–ª—è—é—â–µ–≥–æ —Ç–µ–º—É, –Ω–∞–≤–µ—Ä—Ö body -- —ç—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –±–ª–æ–∫–∏—Ä—É–µ—Ç —Ä–µ–Ω–¥–µ—Ä, —Ç–æ –µ—Å—Ç—å –≤—Å—è —Ä–∞–∑–º–µ—Ç–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –Ω–µ –ø–æ—è–≤–∏—Ç—Å—è –Ω–∞ —ç–∫—Ä–∞–Ω–µ, –ø–æ–∫–∞ —Å–∫—Ä–∏–ø—Ç –Ω–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è. –û–±—ã—á–Ω–æ —ç—Ç–æ –∞–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω, –Ω–æ –≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ —ç—Ç–æ–≥–æ –æ—Ç–ª–æ–∂–µ–Ω–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞ –º—ã –∏ –¥–æ–±–∏–≤–∞–µ–º—Å—è. –î–∞, —ç—Ç–æ –≤–ª–∏—è–µ—Ç –Ω–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é, –Ω–æ –∑–¥–µ—Å—å –∏–¥—ë—Ç —Ç—Ä–µ–π–¥–æ—Ñ—Ñ –º–µ–∂–¥—É –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π –∏ UX, –∏ —Å —É—á—ë—Ç–æ–º —Ä–∞–∑–º–µ—Ä–∞ –≤—Å—Ç–∞–≤–ª—è–µ–º–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞ —ç—Ç–æ—Ç –±–∞—Ç—Ç–ª —Å –æ—Å–Ω–æ–≤–∞—Ç–µ–ª—å–Ω—ã–º –ø–µ—Ä–µ–≤–µ—Å–æ–º –±–µ—Ä—ë—Ç —É—á–∞—Å—Ç–Ω–∏–∫ —Å–ø—Ä–∞–≤–∞ ‚Äî –¥–∞–∂–µ —Å –±–æ–ª—å—à–∏–º —Ç—Ä–æ—Ç—Ç–ª–∏–Ω–≥–æ–º —ç—Ç–∞ –∑–∞–¥–µ—Ä–∂–∫–∞ –Ω–µ —á—É–≤—Å—Ç–≤—É–µ—Ç—Å—è.

–í—Å—Ç–∞–≤–∫–∞ —Å–∫—Ä–∏–ø—Ç–∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤–∞—à–µ–≥–æ —Å—Ç–µ–∫–∞: –≤ –ø—Ä–æ—Å—Ç–µ–π—à–µ–º —Å–ª—É—á–∞–µ –ø—Ä–æ—Å—Ç–æ –≤—Å—Ç–∞–≤–ª—è–µ—Ç–µ –µ–≥–æ –≤ html, –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å webpack –¥–ª—è —ç—Ç–æ–≥–æ –µ—Å—Ç—å –ª–æ–∞–¥–µ—Ä—ã, –≤ —Å–ª—É—á–∞–µ —Å Gatsby –º—ã –º–æ–∂–µ–º –≤–∫–ª–∏–Ω–∏—Ç—å—Å—è –≤ –ø—Ä–æ—Ü–µ—Å—Å —Ä–µ–Ω–¥–µ—Ä–∞ —á–µ—Ä–µ–∑ gatsby-ssr.js:

```jsx
import React from 'react'
import { themeColors } from '@theme'
import { INITIAL_COLOR_SCHEME_CSS_VAR, COLOR_SCHEME_LC_KEY } from '@/utils/constants'

const defineColorScheme = () => {
  const themeColors = 'üé®'
  const colorSchemeLCKey = 'üîë'
  const initialColorSchemeCSSVar = '‚ú®'

  let colorScheme
  const siteLevelColorScheme = localStorage.getItem(colorSchemeLCKey)
  const mql = window.matchMedia('(prefers-color-scheme: dark)')
  const osLevelColorScheme = mql.matches ? 'dark' : 'light'

  if (siteLevelColorScheme) {
    colorScheme = siteLevelColorScheme
  } else {
    colorScheme = osLevelColorScheme
  }

  const root = document.documentElement
  root.style.setProperty(initialColorSchemeCSSVar, colorScheme)
  Object.entries(themeColors).forEach(([colorVar, valueByTheme]) => {
    root.style.setProperty(`--color-${colorVar}`, valueByTheme[colorScheme])
  })
}

const ColorSchemeScript = () => {
  const stringifiedFunction = String(defineColorScheme)
    .replace("'üé®'", JSON.stringify(themeColors))
    .replace('üîë', COLOR_SCHEME_LC_KEY)
    .replace('‚ú®', INITIAL_COLOR_SCHEME_CSS_VAR)

  return <script dangerouslySetInnerHTML={{ __html: `(${stringifiedFunction})()` }} />
}

export const onRenderBody = ({ setPreBodyComponents }) => {
  setPreBodyComponents(<ColorSchemeScript />)
}
```

–†–∞–∑–±–µ—Ä—ë–º—Å—è, —á—Ç–æ –≤ –Ω—ë–º –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç. –†–∞—Å–ø—É—Ç–∞–µ–º —ç—Ç–æ—Ç –∫–ª—É–±–æ–∫ —Å–Ω–∏–∑—É –≤–≤–µ—Ä—Ö:

1. –ü–æ—É—á–∞–≤—Å—Ç–≤–æ–≤–∞—Ç—å –≤ —Ä–µ–Ω–¥–µ—Ä–µ –º–æ–∂–Ω–æ —á–µ—Ä–µ–∑ —Ñ—É–Ω–∫—Ü–∏—é onRenderBody, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ–º—É—é Gatsby. –ò–∑ –µ—ë –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –¥—Ä—É–≥—É—é —Ñ—É–Ω–∫—Ü–∏—é setPreBodyComponents, –∫–æ—Ç–æ—Ä–∞—è –¥–µ–ª–∞–µ—Ç –∏–º–µ–Ω–Ω–æ —Ç–æ, —á—Ç–æ —É –Ω–µ—ë –≤ –Ω–∞–∑–≤–∞–Ω–∏–∏: –≤—Å—Ç–∞–≤–ª—è–µ—Ç –Ω–∞–≤–µ—Ä—Ö body –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã. –ú—ã –±—É–¥–µ–º –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å —Ç—É–¥–∞ —Å–∫—Ä–∏–ø—Ç
1. –°–∫—Ä–∏–ø—Ç -- —ç—Ç–æ React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç. –ß—Ç–æ–±—ã –ø—Ä–æ–ø–∏—Å–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å–∫—Ä–∏–ø—Ç–∞ –≤ JSX –º—ã –¥–æ–ª–∂–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å dangerouslySetInnerHTML, —Ç–æ –µ—Å—Ç—å –Ω–∞—à–∞ —Ñ—É–Ω–∫—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Å—Ç—Ä–æ–∫–æ–π. –¢–∞–∫–∂–µ –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å—Ç–∞—Ä—ã–π –¥–æ–±—Ä—ã–π IIFE, —á—Ç–æ–±—ã –Ω–µ –∑–∞—Å–æ—Ä—è—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—ã–π –Ω–µ–π–º—Å–ø–µ–π—Å
1. –¢.–∫. –∫–æ–¥–∏—Ç—å –≤–Ω—É—Ç—Ä–∏ —Å—Ç—Ä–æ–∫–∏ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—é –≤ –±–ª–æ–∫–Ω–æ—Ç–µ, –º—ã –æ–ø—Ä–µ–¥–µ–ª–∏–º –Ω–æ—Ä–º–∞–ª—å–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é, –∞ –ø–æ—Ç–æ–º –ø—Ä–µ–≤—Ä–∞—Ç–∏–º –µ—ë –≤ —Å—Ç—Ä–æ–∫—É. –ü—Ä–æ–±–ª–µ–º–∞ –≤ —Ç–æ–º, —á—Ç–æ –µ—Å–ª–∏ –º—ã –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–∏ –≤–Ω–µ—à–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, —Ç–æ –ø—Ä–∏ –ø—Ä–µ–≤—Ä–∞—â–µ–Ω–∏–∏ –≤ —Å—Ç—Ä–æ–∫—É –æ–Ω–∏ –Ω–µ –ø—Ä–µ–≤—Ä–∞—Ç—è—Ç—Å—è –≤ –∑–Ω–∞—á–µ–Ω–∏—è, —Ç–∞–∫ —á—Ç–æ –Ω–∞–º –Ω—É–∂–Ω–æ –ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ —ç—Ç—É –∑–∞–º–µ–Ω—É —Å–∞–º–∏–º. –ó–¥–µ—Å—å —ç—Ç–æ –¥–µ–ª–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ –∑–∞–º–µ–Ω—É —ç–º–æ–¥–∂–∏ –Ω–∞ –∑–Ω–∞—á–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤–Ω—É—Ç—Ä–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
1. –ù–∞–∫–æ–Ω–µ—Ü, —Å–∞–º–∞ —Ñ—É–Ω–∫—Ü–∏—è. –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–µ–º—É –ø–æ —Å–ª–µ–¥—É—é—â–µ–π –ª–æ–≥–∏–∫–µ: –≤ Local Storage –ª–µ–∂–∏—Ç –∑–Ω–∞—á–µ–Ω–∏–µ? –ó–Ω–∞—á–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏–ª —Ç–µ–º—É –Ω–∞ —É—Ä–æ–≤–Ω–µ —Å–∞–π—Ç–∞ —á–µ—Ä–µ–∑ —Ç–æ–≥–≥–ª -- –±–µ—Ä—ë–º –µ–≥–æ. –ï—Å–ª–∏ –ø—É—Å—Ç–æ, —Ç–æ —Å–º–æ—Ç—Ä–∏–º –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–µ –Ω–∞ —É—Ä–æ–≤–Ω–µ –û–°. –ï—Å–ª–∏ –∏ —Ç–∞–º –ø—É—Å—Ç–æ –∏–ª–∏ —Ç–∞–∫–∞—è —Ñ–∏—á–∞ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è, —Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å–≤–µ—Ç–ª—É—é —Ç–µ–º—É.
1. –í –∫–æ–Ω—Ü–µ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º –∑–Ω–∞—á–µ–Ω–∏—è CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏ –∑–∞–≤–æ–¥–∏–º –Ω–æ–≤—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –≤—ã–±—Ä–∞–Ω–Ω–æ–π —Ç–µ–º—ã. –ú—ã –±—ã –º–æ–≥–ª–∏ –ø–µ—Ä–µ–¥–∞—Ç—å –µ—ë –∏ —á–µ—Ä–µ–∑ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ –¥–æ–±–∞–≤–∏–≤ –∫–∞–∫–æ–π-–Ω–∏–±—É–¥—å –∫–ª–∞—Å—Å -- —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ –æ–¥–∏–Ω –∏–∑ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤.

–¢–µ–ø–µ—Ä—å –ø—Ä–∏ —Å–±–æ—Ä–∫–µ –ø—Ä–æ–µ–∫—Ç–∞ Gatsby –¥–æ–±–∞–≤–∏—Ç —Å–∫—Ä–∏–ø—Ç –Ω–∞–≤–µ—Ä—Ö body, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –∏—Å–ø–æ–ª–Ω–µ–Ω —É–∂–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –ü—Ä–∏ —ç—Ç–æ–º –º–∏—Ä –∑–∞–º—Ä—ë—Ç –Ω–∞ –¥–æ–ª—é —Å–µ–∫—É–Ω–¥—ã, –ø–æ–∫–∞ –æ–Ω –∏—Å–ø–æ–ª–Ω—è–µ—Ç—Å—è, –Ω–æ –∫–æ–≥–¥–∞ –Ω–∞ —ç–∫—Ä–∞–Ω–µ –ø–æ—è–≤—è—Ç—Å—è —ç–ª–µ–º–µ–Ω—Ç—ã, –æ–Ω–∏ —É–∂–µ –±—É–¥—É—Ç —Ä–∞—Å–∫—Ä–∞—à–µ–Ω—ã –≤ —Ü–≤–µ—Ç–∞ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º —Ç–µ–º—ã. –ò –≤ —ç—Ç–æ–º –∏ –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤—Å—è –º–∞–≥–∏—è CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö -- –º—ã –∏–∑–º–µ–Ω–∏–ª–∏ –∏—Ö –∑–Ω–∞—á–µ–Ω–∏—è –Ω–∞ —É—Ä–æ–≤–Ω–µ html –∏ –≤–µ—Å—å –ø—Ä–æ–µ–∫—Ç —Ä–∞–∑—É–∫—Ä–∞—Å–∏–ª—Å—è –≤ —ç—Ç–∏ —Ü–≤–µ—Ç–∞, –Ω–µ –¥–æ–∂–∏–¥–∞—è—Å—å –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è —Å–∫—Ä–∏–ø—Ç–æ–≤, –∞ –∏–º–µ–Ω–Ω–æ —Ä–µ—Ä–µ–Ω–¥–µ—Ä–∞, –≥–¥–µ —Ç–æ–ª—å–∫–æ –º–æ–∂–Ω–æ –±—É–¥–µ—Ç –ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ –ø–æ–¥–æ–±–Ω–æ–µ —Å—Ä–µ–¥—Å—Ç–≤–∞–º–∏ JS.

–û—Å—Ç–∞—ë—Ç—Å—è –∏–∑–≤–µ—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç –æ –≤—ã–±—Ä–∞–Ω–Ω–æ–π —Ç–µ–º–µ -- –º—ã –ø—Ä–æ–ø–∏—Å–∞–ª–∏ –Ω—É–∂–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤ CSS, –Ω–æ —Å—Ç–µ–π—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å–≤–µ—Ç–ª–æ–π —Ç–µ–º–µ. –ó–¥–µ—Å—å —É–∂–µ useEffect –æ—Ç–ª–∏—á–Ω–æ –ø–æ–¥–æ–π–¥—ë—Ç:

```tsx{4,14-18}
import React, { useEffect, useState } from 'react'
import { ColorSchemeContext } from './useColorScheme'
import { ColorSchemeTypes, themeColors } from '@theme'
import { INITIAL_COLOR_SCHEME_CSS_VAR, COLOR_SCHEME_LC_KEY } from '@/utils/constants'

interface ColorSchemeProviderProps {
  /** Content with access to color scheme */
  children: React.ReactNode
}

const ColorSchemeProvider = ({ children }: ColorSchemeProviderProps) => {
  const [colorScheme, setColorScheme] = useState<ColorSchemeTypes | undefined>(undefined)

  useEffect(() => {
    const root = document.documentElement
    const initialColorScheme = root.style.getPropertyValue(INITIAL_COLOR_SCHEME_CSS_VAR) as ColorSchemeTypes
    setColorScheme(initialColorScheme)
  }, [])

  const saveColorScheme = (newColorScheme: ColorSchemeTypes) => {
    window.localStorage.setItem(COLOR_SCHEME_LC_KEY, newColorScheme)

    const root = document.documentElement
    Object.entries(themeColors).forEach(([colorVar, valueByTheme]) => {
      root.style.setProperty(`--color-${colorVar}`, valueByTheme[newColorScheme])
    })

    setColorScheme(newColorScheme)
  }

  return <ColorSchemeContext.Provider value={[colorScheme, saveColorScheme]}>{children}</ColorSchemeContext.Provider>
}

export { default as useColorScheme } from './useColorScheme'

export default ColorSchemeProvider
```

–ò–º–µ–Ω–Ω–æ –ø–æ—ç—Ç–æ–º—É –Ω–∞–º –∏ –Ω—É–∂–µ–Ω –±—ã–ª undefined –≤ —Å—Ç–µ–π—Ç–µ. –í–µ–¥—å –¥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç—Ñ—Ñ–µ–∫—Ç–∞ –º—ã –Ω–µ –∑–Ω–∞–µ–º –∫–∞–∫–∞—è —Ç–µ–º–∞ –≤—ã–±—Ä–∞–Ω–∞. –ê –µ—Å–ª–∏ –º—ã –Ω–µ –∑–Ω–∞–µ–º —ç—Ç–æ–≥–æ, —Ç–æ –∫–∞–∫ –æ–± —ç—Ç–æ–º —É–∑–Ω–∞–µ—Ç —Ç–æ–≥–≥–ª? –•–º, –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ, –µ—Å–ª–∏ –≤—ã –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ –∫–æ–¥ –Ω–∞—à–µ–≥–æ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—è, —Ç–æ —É–≤–∏–¥–∏—Ç–µ, —á—Ç–æ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –≤—Å–µ–≥–¥–∞ –∏–∫–æ–Ω–∫–∞ –ª—É–Ω—ã, —Ç–æ –µ—Å—Ç—å –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ —Ç—ë–º–Ω—É—é —Ç–µ–º—É, —Ç–æ –µ—Å—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è —Å–≤–µ—Ç–ª–æ–π —Ç–µ–º—ã. –ò –µ—Å–ª–∏ —Ç–µ–º–∞ –≤—ã–±—Ä–∞–Ω–∞ —Ç—ë–º–Ω–∞—è, —Ç–æ –º–µ–∂–¥—É —Å–µ—Ä–≤–µ—Ä–Ω—ã–º —Ä–µ–Ω–¥–µ—Ä–æ–º –∏ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–º –Ω–∞—á–∞–ª—å–Ω—ã–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –ø–æ–ª—É—á–∞–µ—Ç—Å—è –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ. –î–ª—è –ø–æ–¥–æ–±–Ω—ã—Ö –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö —Å–æ—Å—Ç–∞–≤–ª—è—é—â–∏—Ö —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Å–∞–π—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ—Ç–ª–æ–∂–µ–Ω–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä, —Ç–æ –µ—Å—Ç—å –º—ã –Ω–µ –≤–∫–ª—é—á–∞–µ–º –∏—Ö –≤ HTML –∏ —Ä–µ–Ω–¥–µ—Ä–∏–º, –∫–æ–≥–¥–∞ —É –Ω–∞—Å –¥–ª—è —ç—Ç–æ–≥–æ –±—É–¥—É—Ç –ø–æ–ª—É—á–µ–Ω—ã –≤—Å–µ –¥–∞–Ω–Ω—ã–µ, –≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Ç–µ–º—ã –∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ -- –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —ç–ª–µ–º–µ–Ω—Ç –∫—É–¥–∞ –ª—É—á—à–µ, —á–µ–º –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π, —Ö–æ—Ç—è –±—ã —Å –≤–∏–∑—É–∞–ª—å–Ω–æ–π —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è, –Ω–µ –≥–æ–≤–æ—Ä—è —É–∂–µ –æ –±–∞–≥–∞—Ö —Ä–µ–≥–∏–¥—Ä–∞—Ü–∏–∏... –¢–∞–∫ —á—Ç–æ –≤–Ω–æ—Å–∏–º –ø–æ—Å–ª–µ–¥–Ω–µ–µ –ª—ë–≥–∫–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ:

```tsx{7}
import React from 'react'
import { useColorScheme } from '@/components/ColorSchemeProvider'
import { FiMoon, FiSun } from 'react-icons/fi'

const ColorSchemeToggle = () => {
  const [colorScheme, setColorScheme] = useColorScheme()
  if (!colorScheme) return null

  return (
    <button
      onClick={() => setColorScheme(colorScheme === 'dark' ? 'light' : 'dark')}
      aria-label="Dark theme"
      aria-pressed={colorScheme === 'dark'}
    >
      {colorScheme === 'dark' ? <FiSun /> : <FiMoon />}
    </button>
  )
}

export default ColorSchemeToggle 
```

---

–ö–∞–∫ –≤–∏–¥–∏—Ç–µ, –¥–æ–≤–æ–ª—å–Ω–æ –º–Ω–æ–≥–æ —Ç–æ–Ω–∫–∏—Ö –º–æ–º–µ–Ω—Ç–æ–≤ –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –æ–¥–Ω–æ–π –∫–Ω–æ–ø–æ—á–∫–∏ –Ω–∞–≤–µ—Ä—Ö—É —à–∞–ø–∫–∏... –ù–æ —Å —Ç–∞–∫–∏–º–∏ —Ñ–∏—á–∞–º–∏ –Ω—É–∂–Ω–æ –ª–∏–±–æ —Ö–æ—Ä–æ—à–æ, –ª–∏–±–æ –Ω–∏–∫–∞–∫. –ü—Ä–∏ –ø–µ—Ä–≤–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Ç—ë–º–Ω–æ–π —Ç–µ–º—ã –≤ —ç—Ç–æ–º –±–ª–æ–≥–µ —è –¥–æ–ø—É—Å—Ç–∏–ª —Ä—è–¥ –æ—à–∏–±–æ–∫, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏–≤–æ–¥–∏–ª–∏ –∫ —Ç–æ–º—É, —á—Ç–æ —Ç–µ–∫—Å—Ç –ø–æ–ª—É—á–∞–ª –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è —Ç—ë–º–Ω–æ–π —Ç–µ–º—ã, –∫–æ–≥–¥–∞ —Ñ–æ–Ω –æ—Å—Ç–∞–≤–∞–ª—Å—è —Å–≤–µ—Ç–ª—ã–º, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫ —Ç–æ–º—É, —á—Ç–æ —Ç–µ–∫—Å—Ç –ø–µ—Ä–µ—Å—Ç–∞–≤–∞–ª –±—ã—Ç—å –≤–∏–¥–µ–Ω -- –¥—É–º–∞—é —ç—Ç–æ –±—ã–ª–æ –≤—ã–∑–≤–∞–Ω–æ –æ—Ç–ª–æ–∂–µ–Ω–Ω—ã–º –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º —Ç–µ–º—ã, —á—Ç–æ –≤–∫—É–ø–µ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –¥–∞–Ω–Ω—ã—Ö –≤ —Å–µ—Ä–≤–∏—Å –≤–æ—Ä–∫–µ—Ä–µ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫ —Ç–∞–∫–æ–º—É —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É. –ï—â—ë –∑–¥–µ—Å—å –±—ã–ª–∏ –ø–µ—Ä–µ—Ö–æ–¥—ã, –∫–æ—Ç–æ—Ä—ã–µ —ç—Ç–æ—Ç –±–ª–∏–Ω–∫ –∑–∞—Ç—è–≥–∏–≤–∞–ª–∏ –Ω–∞ –ø–æ–ª—Å–µ–∫—É–Ω–¥—ã... –ù–æ —Ç–µ–ø–µ—Ä—å –≤—Å—ë –≤ –ø–æ—Ä—è–¥–∫–µ -- CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ —Ä–∞–Ω–Ω–∏–π body —Å–∫—Ä–∏–ø—Ç —Ç–∞—â–∞—Ç. –ï—â—ë —Ä–∞–∑ –≤—ã—Ä–∞–∂–∞—é —Å–≤–æ–π —Ä–µ—Å–ø–µ–∫—Ç –î–∂–æ—à—É –∏ –Ω–∞–¥–µ—é—Å—å, —á—Ç–æ –º–æ—è –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥—è—â–µ–≥–æ –±—É–¥–µ—Ç –∫–æ–º—É-—Ç–æ –ø–æ–ª–µ–∑–Ω–∞. [–î–µ–º–∫–∞](https://dark-theme-demo.netlify.app/) –ø—Ä–∏–ª–∞–≥–∞–µ—Ç—Å—è.